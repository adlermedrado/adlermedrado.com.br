<!--
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -->
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=viewport
          content="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,user-scalable=1">
    <meta name="description" content="My corner of the web">
    <title>Adler Medrado's little piece of turf</title>
    <link rel="author" href="/humans.txt"/>
    <link rel="canonical" href="https://adlermedrado.com.br"/>
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body><header>
    <nav class="navbar" role="navigation">
        <div class="navbar_left">
            <a href="/"><strong>Adler Medrado</strong></a>
        </div>
        <div class="navbar_right">
            <a href="/posts">Posts</a>
            <a href="/tags">Posts by Tags</a>
        </div>
    </nav>
</header>
<main>
<section class="section">
    <article>
        <div>
            <h1>Profiling de banco de dados com Zend_Db_Profiler e Firebug</h1>
            <div>
                <div>
                    <p>
                        <small>
                            <time>June 17, 2009</time>
                            |
                            2  minutes  read
                        </small>
                    </p>
                </div>
                <span class="line_break"></span>
            </div>
            <div class="content">
                <p>Se você usa o Zend Framework já percebeu que não é muito trivial obter as queries executadas no banco de dados e isso é
algo comum no dia-a-dia de um desenvolvedor pois com elas nós podemos corrigir bugs e determinar pontos de lentidão e
etc.</p>
<p>O Zend Framework possui um componente chamado <code>Zend_Db_Profiler</code> que nos permite realizar o profiling dos acessos ao banco
mas na minha opinião ele sozinho é muito chato de usar então eu utilizo ele em conjunto com o componente
<code>Zend_Db_Profiler_Firebug</code> e é isso que vou mostrar a você como se faz.</p>
<p>Primeiramente, você deve ter os complementos do Firefox Firebug e FirePHP instalados, ou seja, só é possível usar este
recurso com o Firefox o que não deve ser um problema pois a maioria dos desenvolvedores utilizam ele não é mesmo?</p>
<p>Beleza, agora vamos dizer à nossa aplicação que iremos usar este recurso. O primeiro passo é abrir a conexão em nosso
bootstrapper mais ou menos como o código abaixo.</p>
<p>A propósito, estou levando em consideração que você já saiba usar o <code>Zend_Config_Ini</code> para guardar configurações do
sistema, entre elas, de acesso ao banco de dados.</p>
<p>Vamos lá:</p>
<pre><code>// Get the configuration
$pathConfig = 'conf' . DIRECTORY_SEPARATOR;
$config = new Zend_Config_Ini($pathConfig . 'config.ini', 'development');

// Opening connection
$db = Zend_Db::factory($config-&gt;database-&gt;adapter, $_arrDbConnection['database']);
Zend_Registry::set('db', $db);
Zend_Db_Table::setDefaultAdapter($db);
</code></pre>
<p>Com o código acima nós abrimos o arquivo de configuração, convertemos em objeto (<code>Zend_Config_Ini</code>), abrimos a conexão com
o banco de dados e o associamos como adapter padrão às classes derivadas de Zend_Db_Table.</p>
<p>Agora para configurarmos o profiler basta fazer o seguinte:</p>
<pre><code>// Configuring Profiler
$profiler = new Zend_Db_Profiler_Firebug('db-profiling');
$profiler-&gt;setEnabled($config-&gt;firebug-&gt;profiler-&gt;enabled);
$db-&gt;setProfiler($profiler);
</code></pre>
<p>Pronto.</p>
<p>Se você observar o código acima, poderá ver que estou determinando a configuração do Profiler no arquivo INI de
configuração também, mas caso você não queira fazer desta forma basta passar true como parâmetro do método <code>setEnabled()</code>
do objeto de profiler, por exemplo:</p>
<pre><code>// Configuring Profiler
$profiler = new Zend_Db_Profiler_Firebug('db-profiling');
$profiler-&gt;setEnabled(true);
$db-&gt;setProfiler($profiler);
</code></pre>
<p>Agora ao executar qualquer comando no banco de dados as informações serão mostradas no console do firebug. Veja o
screenshot abaixo:</p>
<p>Muito simples, não é? O que você achou? Deixe seu comentário.</p>

            </div>
        </div>
    </article>
    <div>
        <div>
            <div>
                
                <a href="https://adlermedrado.com.br/posts/vale-a-pena-tirar-certificacoes/">&#8592; Vale a pena tirar certificacoes?</a>
                
                |
                
                <a href="https://adlermedrado.com.br/posts/minha-agenda/">Minha agenda &#8594;</a>
                
            </div>
        </div>
    </div>
</section>

</main><span class="line_break"></span>
<span class="line_break"></span>
<footer>
    <div>
        <p><small>&copy; 1996-2023 Adler Medrado</small></p>
    </div>
    <div class="gpg_signed_info"><p>All pages on this website are PGP signed.
        Import my <a href="/pub-key.asc">public key</a> and check with <em>curl https://adlermedrado.com.br/posts/profiling-db-zend-firebug/ | gpg --verify</em></p></div>
</footer></body>
</html>
<!--
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEXZd8hNji/2MRgqvhKWCEk4dBO2AFAmSHr+wACgkQKWCEk4dB
O2DVBQ//QX+Nv4Psb/ss0WcvI6m/OitHp4CqvYl9e7lCRgJjc5CRlI6DZOOUWYrB
GQAyjULsvCVO62Ua678CwPC2Cclgnn5aENd2FO4ThbAnEBD3ZNRnJ0CLv177Qbml
KBDMmXrLqFMQEpiS3URFdic8dXObAu7/9GmUOO37U+KpcrKgQIX1rAnRObe2yi71
2ZQUxLx4Jz4Sve3pfhHEJJQuvAJfV+akHVTa8LP/vmER+s16Dif66tbKrCCaWyNB
b+RasjZoA1KkAMnJZj1tLG4tXPq3B4QnFVgSFavNoW0xDwBxY75l6YFbF4j2/y77
u/1Mu3Dqy0GhCrolOMuG4MMCAZt2UiYV55b3vYuJhdK3kGsAzY3C8EAXc9WHAfTQ
2frorE88CicI/eLBmDgrT3P6+AgGs5Mo7R2QXkc5B2etHMTPnBgH6IH6+J8HRlfG
Jt96McB97HflInHdxCoWuXxnf5aZFZCKzw6iCsY6w74vMjM5wgyr6WK9G0bjgUfe
PE2hp+bQcPg9OZ7nc/tjeaLbZghzjlD4NEMy+YNfm0UZLfJ+QUWMwmzpdVOrx09Y
6ALgB3oyhNktXCw1/l0ydvUXmmiqbUohjuAfGzYfm4QDWyxAaNjQsFLPfGEUlxKS
rTOvDzfayRbXgWdML6WAGbHA/mz0hl4vKFfEvD6o5Zj6erv5IXU=
=WiTG
-----END PGP SIGNATURE-----
-->
