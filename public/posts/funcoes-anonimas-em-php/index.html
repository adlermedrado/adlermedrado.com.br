<!--
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -->
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name=viewport
          content="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,user-scalable=1">
    <meta name="description" content="My corner of the web">
    <title>Adler Medrado's little piece of turf</title>
    <link rel="author" href="/humans.txt"/>
    <link rel="canonical" href="https://adlermedrado.com.br"/>
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body><header>
    <nav class="navbar" role="navigation">
        <div class="navbar_left">
            <a href="/"><strong>Adler Medrado</strong></a>
        </div>
        <div class="navbar_right">
            <a href="/posts">Posts</a>
            <a href="/tags">Posts by Tags</a>
        </div>
    </nav>
</header>
<main>
<section class="section">
    <article>
        <div>
            <h1>Funções anônimas em PHP</h1>
            <div>
                <div>
                    <p>
                        <small>
                            <time>September 26, 2010</time>
                            |
                            3  minutes  read
                        </small>
                    </p>
                </div>
                <span class="line_break"></span>
            </div>
            <div class="content">
                <p><strong>Introdução</strong></p>
<p>Não é novidade para ninguém que foram incluídos no PHP 5.3 alguns recursos novos que a tornam uma linguagem melhor e
mais completa.</p>
<p>A novidade é que eu irei publicar aqui a partir deste post, exemplos de como escrever código PHP usando estas
funcionalidades.</p>
<p>Minha idéia é de escrever posts curtos e direto ao ponto.</p>
<p>As funções anônimas, também conhecidas como closures e lambda functions são funcionalidades que são definidas sem que
elas possuam um nome que as identifica e normalmente são usadas para definirmos funções que não serão utilizadas em
nenhum outro local, apenas naquele momento específico.</p>
<p><strong>Como eu uso isso?</strong></p>
<p>Normalmente quando escrevemos uma função, nós declaramos o nome dela e assim sabemos como identifica-la na hora em que
precisamos usa-la.</p>
<p>Exemplo:</p>
<pre><code>&lt;?php
function funcaoExemplo($parametro1, $parametro2) {
return &quot;Faça alguma coisa com o $parametro1 e com o $parametro2&quot;;
}
echo funcaoExemplo('Hello','World');
?&gt;
</code></pre>
<p>O exemplo acima demonstra a maneira convencional que declaramos e usamos as funções em PHP, abaixo eu mostrarei alguns
exemplos de uso das funções anônimas.</p>
<p>O próximo exemplo é a declaração e uso de uma função semelhante à declarada no exemplo anterior, porém, na forma de
função anônima:</p>
<pre><code>&lt;?php
$funcaoExemplo = function($parametro1, $parametro2) {
    return &quot;Faça alguma coisa com o $parametro1 e com o $parametro2&quot;;
};

echo $funcaoExemplo('Hello','Função Anônima');
?&gt;
</code></pre>
<p>Como você pôde observar, a função não recebe um nome quando é declarada e sim ela é atribuída a uma variável comum PHP.</p>
<p>Nós podemos utilizar nestas funções as variáveis declaradas fora de seu escopo, para isso nós devemos importar as
variáveis por meio do comando use. Exemplo:</p>
<pre><code>&lt;?php
$nome = 'Adler';
$sobrenome = 'Brediks';
$mostraMeuNome = function() use ($nome, $sobrenome) {
    $sobrenome .= ' Medrado';
    echo &quot;Seu nome é: $nome $sobrenome&quot;;
};
$mostraMeuNome();
?&gt;
</code></pre>
<p>É possível usar variáveis passadas como referência. O exemplo anterior será modificado para ilustrar a funcionalidade:</p>
<pre><code>&lt;?php
$nome = 'Adler';
$sobrenome = 'Brediks';
$mostraMeuNome = function() use ($nome, &amp;$sobrenome) {
    $sobrenome .= ' Medrado';
    echo &quot;Seu nome é: $nome $sobrenome&quot;;
};
echo '&lt;br&gt;';
$mostraMeuNome();
echo '&lt;br&gt;';
echo $sobrenome;
?&gt;
</code></pre>
<p>Faça o teste e veja que se o operador de referência(&amp;) for removido, a variável $sobrenome não é modificada fora do
escopo da função.</p>
<p>As closures podem ser muito bem aproveitadas em conjunto com funções nativas do PHP que necessitam de uma função de
callback, como a função array_map que será a função usada em meu exemplo. Veja:</p>
<pre><code>&lt;?php
$arrExemploMap = array(1,2,3,4,5,6,7,8,9,10);
$ret = array_map(function($v) {
    return $v * $v;
}, $arrExemploMap);

var_dump($ret);
?&gt;
</code></pre>
<p>O código acima exemplifica o que falei anteriormente a respeito de declarar funções que não serão usadas em mais nenhum
lugar.</p>
<p><strong>Usando isso em objetos</strong></p>
<p>Esta funcionalidade também pode ser usada no paradigma POO e o conceito é exatamente o mesmo, basta preparar o seu
método para receber uma função desta como parâmetro. Exemplo:</p>
<pre><code>&lt;?php
class Lambida {
    public function hello($param1, $callback) {
        echo 'Esse é o valor do $param1: ' . $param1 . '&lt;br /&gt;';
        echo $callback();
    }
}

$lambida = new Lambida();
$lambida-&gt;hello('Eu amo muito tudo isso', function() {
    return 'Eu sou o retorno da funcao de callback'; }
);
?&gt;
</code></pre>
<p><strong>Conclusão</strong></p>
<p>Este é mais um recurso que o PHP oferece para torna-lo mais ágil e eficiente.</p>
<p>Os exemplos que eu apresentei já servem como ponto de partida para estudos mais aprofundados e eu espero que ele tenha
sido útil para você.</p>
<p>Se você já usou este recurso em situações diferentes das que eu apresentei, deixe seu comentário.</p>
<p>Abraços.</p>

            </div>
        </div>
    </article>
    <div>
        <div>
            <div>
                
                <a href="https://adlermedrado.com.br/posts/promo-phpsp-ajuda-tirar-certificacao/">&#8592; Promoção do PHPSP te ajuda a tirar certificações Zend</a>
                
                |
                
                <a href="https://adlermedrado.com.br/posts/quase-um-ano-de-dangolino-sem-precisar-alterar-uma-linha-de-codigo/">Quase um ano de Dangolino sem precisar alterar uma linha de código &#8594;</a>
                
            </div>
        </div>
    </div>
</section>

</main><span class="line_break"></span>
<span class="line_break"></span>
<footer>
    <div>
        <p><small>&copy; 1996-2023 Adler Medrado</small></p>
    </div>
    <div class="gpg_signed_info"><p>All pages on this website are PGP signed.
        Import my <a href="/pub-key.asc">public key</a> and check with <em>curl https://adlermedrado.com.br/posts/funcoes-anonimas-em-php/ | gpg --verify</em></p></div>
</footer></body>
</html>
<!--
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEXZd8hNji/2MRgqvhKWCEk4dBO2AFAmSHr+AACgkQKWCEk4dB
O2BVOBAAhGEnAtweQTKpY3u3dqJN4mFRngOBLMVMOlhrM0kpyp+YGQ/5OEeeohnd
OqnqcfepEvxrlfCt2Wc+Ifj5XkHaFAweOLMMIBg4c6VP9tQZ9MebTW2uI3S7yFQy
mqkfPGpkjq8aNtk8PfSsYPh34r2LmhlGrI1B1Rrv0emSoCv45d/Xb1GoIQeWgzLA
hRA4e8LoD3du6TaVTpQCf8E3wxSYNkYCwIgyN7qGZc7RIqlu/QOAVJ7Gxjyjs174
YYRuDQICab18rDZzl+dEo8lOVq9IfKT6/SNRI3+5ev2cFf+V4gBFd9VUwfc7Uao/
3slF7V0yfCDPbitIf1RM0XikJMPaWdsmINBfx6chf8dUx95oJnt1VkOyWIo9aJy7
5Wz1BbYbefNPoXxo6mW9V6/tX2CPu1faUP88vgiLLmeiRZhCZnr1sCyXpWJe1xJc
cQUe/3lt5DLx7ubGhNiouKfGgu4FFC9bWMEle19sbhPTAW+uFDSrzG9wP5Sw9mf1
p/27nt33Gyi/+0mrhumqyGwNFDe/AFnqarjDDYpCrvvbogGI3ky/09KQRgdIc7Wi
u38s5cPgQ8hpj9f2BVgOtjOlUoczZXMbk6e6rHexPSiIg+Kzs3dtrqhwn3Xae42B
/YfCZ9zCis4exCMWmK0aif3DDiDuYcx0HneOfsf8/9gLSe5bZzs=
=qS9c
-----END PGP SIGNATURE-----
-->
