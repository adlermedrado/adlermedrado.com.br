<!--
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -->
<!--
- -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- - -->
<!--
- - -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- - - -->
<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,user-scalable=1"><meta name=description content="My corner of the web"><title>Tutorial Zend Paginator</title>
<link rel=author href=/humans.txt><link rel=canonical href=https://adlermedrado.com.br><link href=/css/styles.css rel=stylesheet></head><body><header><nav class=navbar role=navigation><div class=navbar_left><a href=/><strong>Adler Medrado</strong></a></div><div class=navbar_right><a href=/posts>Posts</a>
<a href=/now>Now</a>
<a href=/tags>Tags</a></div></nav></header><main><section class=section><article><div><h1>Tutorial Zend Paginator</h1><div><div><p><small><time>March 28, 2009</time>
|
5 minutes read</small></p></div><span class=line_break></span></div><div class=content><p>O Zend Framework é muito interessante mesmo nos componentes mais simples, desta vez eu irei falar sobre o componente
Zend_Paginator, que é um componente que se propõe a fazer a paginação de qualquer coleção de dados de uma maneira bem
simples e mostrar os dados paginados para o usuário.</p><p><strong>ADAPTERS</strong></p><p>Este componente não exige que os dados a serem paginados sejam especificamente dados provenientes de bancos de dados,
ele faz a paginação de arrays, de dados relacionados a objetos Zend_Db_Select e Zend_Db_Table_Select e Iterators. Hoje
iremos nos ater ao uso dos Adapters Array e DbTableSelect.</p><p><strong>Os Adapters disponíveis são:</strong></p><p><code>Array</code> - Manipula qualquer Array criado em PHP
<code>DbSelect</code> - Utiliza um objeto Zend_Db_Select que retornará um Array
<code>DbTableSelect</code> - Utiliza um objeto Zend_Db_Table_Select, que retornará uma instância de Zend_Db_Rowset_Abstract.
<code>Iterator</code> - Utiliza uma instância de Iterator
<code>Null</code> - Não utiliza o mecanismo de paginação do componente permitindo que o programador possa implementar seu próprio
mecanismo.</p><p><strong>ME MOSTRE O CÓDIGO</strong></p><p>Quem está acostumado a ler meus artigos e tutoriais sabem que gosto de ir direto ao assunto e evito colocar textos
enfadonhos, então eu irei mostrar logo algum código aqui pra acordar quem já estiver babando em cima do teclado.</p><p>O primeiro exemplo será de uma paginação com um simples array.</p><p><code>ExemploController.php</code></p><pre><code>$tabela = new Tabela();
$res = $tabela-&gt;fetchAll();

$paginator = Zend_Paginator::factory($res);
$paginator-&gt;setItemCountPerPage(10);
$paginator-&gt;setCurrentPageNumber($this-&gt;_request-&gt;getParam('page'));

$this-&gt;view-&gt;paginator = $paginator;
?&gt;
</code></pre><p>O código acima representa as definições de um paginator em uma action do seu controller. Primeiro é criada a instância
do objeto <code>Zend_Db_Table</code> que será usado para buscar um array com os dados a serem paginados, depois criamos o objeto do
Zend_Paginator passando este array como parâmetro, informamos qual a quantidade de ítens por página e qual a página
atual que é informada por meio de parâmetro via method GET.</p><p>O array poderia ser um simples array ‘criado na mão’ que funcionaria direitinho também.</p><p>Agora vamos dar uma olhada no template da view.</p><p><code>arquivo.phtml</code></p><pre><code>&lt;?php if (count($this-&gt;paginator)): ?&gt;
&lt;?php foreach ($this-&gt;paginator as $exemplo): ?&gt;
&lt;h5&gt;&lt;?php echo $exemplo['titulo']?&gt;&lt;/h5&gt;
&lt;br /&gt;
&lt;p&gt;&lt;?php echo $exemplo['info']?&gt;&lt;/p&gt;
&lt;?php endforeach; ?&gt;
&lt;?echo $this-&gt;paginationControl($this-&gt;paginator,
'All',
'paginator_item.phtml'); ?&gt;
&lt;?php endif; ?&gt;
</code></pre><p>Muito simples. Nós iteramos o objeto paginator que passamos para a view e então manipulamos os ítens do array que passamos como parâmetro no controller.</p><p>O bloco de paginação com First, Last, Next, Last nós colocamos em um arquivo de template (phtml) separado e o passamos
como parâmetro no <code>Zend_View_Helper</code> <code>paginationControl</code> que é quem lida com o controle de paginação.</p><p>Na documentação do <code>Zend_Paginator</code> pode-se encontrar alguns exemplos de template de controle que podemos pegar e usar.</p><p>Vamos ver como isso funciona utilizando-se um objeto <code>Zend_Db_Table_Select</code>:</p><pre><code>$tabela = new Tabela();
$tabelaSelect = $tabela-&gt;select();

$paginator = Zend_Paginator::factory($tabelaSelect);
$paginator-&gt;setItemCountPerPage(10);
$paginator-&gt;setCurrentPageNumber($this-&gt;_request-&gt;getParam('page'));
$this-&gt;view-&gt;paginator = $paginator;
</code></pre><p>A diferença foi apenas o parâmetro que passamos, ao invés de um array, um objeto.</p><p>Vejamos como ficou o template com a iteração do resultado disso:</p><pre><code>&lt;?php if (count($this-&gt;paginator)): ?&gt;
&lt;?php foreach ($this-&gt;paginator as $exemplo): ?&gt;
&lt;h5&gt;&lt;?php echo $exemplo-&gt;titulo?&gt;&lt;/h5&gt;
&lt;br /&gt;
&lt;p&gt;&lt;?php echo $exemplo-&gt;info?&gt;&lt;/p&gt;
&lt;?php endforeach; ?&gt;
&lt;?echo $this-&gt;paginationControl($this-&gt;paginator,
'All',
'paginator_item.phtml'); ?&gt;
&lt;?php endif; ?&gt;
</code></pre><p>A única diferença em relação ao exemplo com array, é que pelo fato de o retorno ser um objeto <code>Zend_Db_Table_Rowset</code>, nós podemos acessar cada coluna do retorno do banco de dados como uma propriedade de um objeto, dessa forma nós tratamos tudo como um objeto.</p><p>Uma outra diferença que também é importante, é que o <code>Zend_Paginator</code> ao ver que a coleção de dados a ser paginada será o
resultado gerado por um objeto <code>Zend_Db_Table_Select</code> ele vai saber como realizar aquela query de paginação com limit e
etc, evitando que todo o conjunto de dados seja retornado de uma única vez. Quando passamos um array por exemplo, nós
enviamos ao <code>Zend_Paginator</code> uma coleção completa e a paginação é feita nele, já com o objeto não, pois ele saberá fazer o
limit implicitamente.</p><p>Bacana não é?</p><p>Vou colocar o código do template do controle de paginação que usei nesses exemplos, que é idêntico ao que está na
documentação do ZF:</p><pre><code>&lt;?php if ($this-&gt;pageCount): ?&gt;
&lt;div class=&quot;paginationControl&quot;&gt;
&lt;?= $this-&gt;firstItemNumber; ?&gt; - &lt;?= $this-&gt;lastItemNumber; ?&gt; of &lt;?= $this-&gt;totalItemCount; ?&gt;

&lt;?php if (isset($this-&gt;previous)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;first)); ?&gt;&quot;&gt;
First
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;First&lt;/span&gt; |
&lt;?php endif; ?&gt;

&lt;?php if (isset($this-&gt;previous)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;previous)); ?&gt;&quot;&gt;
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt; Previous
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt; Previous&lt;/span&gt; |
&lt;?php endif; ?&gt;

&lt;?php if (isset($this-&gt;next)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;next)); ?&gt;&quot;&gt;
Next &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;Next &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;&lt;/span&gt; |
&lt;?php endif; ?&gt;
&lt;?php if (isset($this-&gt;next)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;last)); ?&gt;&quot;&gt;
Last
&lt;/a&gt;
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;Last&lt;/span&gt;
&lt;?php endif; ?&gt;

&lt;/div&gt;
&lt;?php endif; ?&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;
</code></pre><p><strong>CONSIDERAÇÕES FINAIS</strong></p><p>Este componente torna simples o trabalho chato de fazer um paginador na mão nos dando ainda a flexibilidade de não
precisar utilizar somente coleções de dados provenientes de um banco de dados.</p><p>Existem outros macetes que podem ser vistos na documentação do componente, eu coloquei aqui de maneira bem simples
apenas duas formas de se implementar paginação com o componente <code>Zend_Paginator</code> utilizando duas coleções de dados
diferentes.</p><p>Para quem já implementou isso antes sabe que não é um bicho de sete cabeças mas de vez em quando pode se tornar uma
coisa chata e se já temos um componente pronto nós podemos utilizar nossa criatividade e conhecimento diretamente no
negócio da aplicação e não em estrutura.</p><p>Deixe seu comentário sobre este artigo.</p><p>Até o próximo.</p></div></div></article><div><div><div><a href=https://adlermedrado.com.br/posts/enfim-zend-certified-engineer-2/>&#8592; Enfim Zend Certified Engineer #2</a>
|
<a href=https://adlermedrado.com.br/posts/chegou-meu-certificado-zce-zf/>Chegou meu certificado ZCE-ZF &#8594;</a></div></div></div></section></main><span class=line_break></span>
<span class=line_break></span><footer><div><p><br><small><em>Privacy policy: this website employs no tracking.</em></small></p></div><div><p><small>&copy; 1996-2024 Adler Medrado</small></p></div><div class=gpg_signed_info><p>All pages on this website are PGP signed.
Import my <a href=/pub-key.asc>public key</a> and check with <em>curl https://adlermedrado.com.br/posts/tutorial-zend-paginator/ | gpg --verify</em></p></div></footer></body></html><!--
- - -----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEB9cP28xEbBnKQwLObV8aePHcNh0FAmcL348ACgkQbV8aePHc
Nh1zdQ/+OhXhsfFVfINOBD19xhgutJ8jLU4uQo3hRQs4/yid4kzTUCtwGeg7JI5t
9Sd0aKrN0N9ExQTNjYoxwBCcZHonH4REhwkwg6OlMDqTgqnlhur9+VBfihyIvns3
Q8RUipnQg4+Idie/LUICFJP2RI0k0SJmSX/P+qCZmOyJEpP+9zVHM/ikCpzI6yuS
ylnfCwcklfiYwLaW5uwR7vjeEWwhreeaxCqPGAuywLUZP5okiUvmbSp0DUNMU35u
v/EwxnwNqXtxyuCu4w4NkXnYvAcnnOKSeVIeXnxGLKtEW8Dq9udsMTQFojIk+MBv
YNlNYfWQU3F0NBpgpPxT6goamN33G/sTMv3mCt2PqtepsyBQl3Prev6lVMLIIHDY
4a23MLEXGYafZl6Lg7DA88RANbUsfNev57+uW/uSHfJkoNijZAzo+d+ZN9L5RlXs
8Zc3nI5DlY1CtiXGqM/JZFWNPCFqFKX5JeYg1oUKYKK2LEav7v1Kq7kNMrjZ9j+1
oqiyKAplMQdliHubznY2shBEsmqiYvxVnKRf9/TUSsXH1s0A3oEX5ADlS3V/Rjv9
bhE/ys1DX+E6LkgR6wh9KYcw0phVQfZIDWH9nTxoBzeetm3aejBfw97n0dbIWHDv
xhgEubV6VYwI2NMLIAMU5wVBHPK4jxIhS8mvWfOzc3zzGLEK5dA=
=nUli
- - -----END PGP SIGNATURE-----
- - -->
<!--
- -----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEB9cP28xEbBnKQwLObV8aePHcNh0FAmcL36wACgkQbV8aePHc
Nh3xDg/+I3kJ5d+yN5Y405yjF1mIaGckqeyfBR6TlyPojuUCd4HUqtYxwFp9OtMh
VaZN6W3AR+xHvgurlAswSRpXIhT1j6twEACe0UTxulf8DJpZFB1BgX7B99oTge1a
O/f+TB7ng5wKbaRUuF4Je+VAHqBmrrh9AxgZgSV40HU16ZoV4Pw4sQHjWh11KAwJ
v6D/x/hvtkGTW2yK2jdkLHyKWbN5fPfW7z0qEj7Wtj0OGwhMO3qgaVv+MbOoNe8P
VgcbG3MJ1IFS/9RGrLhC0TQVCmBq9KO0jbZcfI0flhbpfOP2Nr3DB0ksCDdRD2Yi
cr70LfFsXcR8SI7mnWYjvU4O57BG/2gxeXfclrvnijlO/BcO5yCwZdVxcF2unYw9
Y1hHDkn2CNqSrFWAkME+OLbss7d9zvYXTQG5ZPgGKaZXnx5ObtP8PsKjl8tGaPxj
m2ND1zWHRAzL/cXhdaTTmybdG+3o8rag8RflrTjOpVwZnMM5HwO3CxaIRDmwB/fY
n4ZKwCVMRgAzU0ZHFUY8Uy5vSYzX+OtsS4vlSZvc1IvceN0z2HVWBYUy95MgYHIm
c5gRGwvM3P4KxYhS7RVZKyQKAJtoYc7VWhEg2q86pSQ+//eFd1s28G5fs2snm+m5
kp3eJrrHddgyBUQR5cVZfjZfrGtOG5qz7J20f9OiwtDJ66sUvDA=
=IyJA
- -----END PGP SIGNATURE-----
- -->
<!--
-----BEGIN PGP SIGNATURE-----

iQIyBAEBCAAdFiEEB9cP28xEbBnKQwLObV8aePHcNh0FAmcL3+EACgkQbV8aePHc
Nh1sJQ/3YKD7hUJdhllyIa+A1HUA0YEHIpp4nsqEd7twNgey2+xr4iV3fkUG9/0G
rpPHg4U/dh4PB5uqYD7eImJfOx9p6lzaEjMYMpORTB8pM8RecfeD49onmlmyAguD
J7hJNh/TpE8Ep7ciTAMUi+jXSndjJzBmvIv+qrcRzIMay0PhNj4iVigTOtz0auLz
8xL/1iEpbZCKSJcnRco/NX3c/5OLgK7bzrzXpJudYGnj2RqaXZjiP0GiiARgzo44
h9evM1LdrAExanlMSH+UA4pjUuN8spFBqfU4vSmwAZSP+zh9sPCDvolm5YJUMcU0
ESmv5IX1LiWe/s7KjLsZ2ykubpuRE3BIyj/ee65fKPpxiMclI6Juc/M2u78LWNyI
EmuQFBEW3KxbheGXQb0/R98HlP6GdcL81EaAL4H9a8NwCOMJeF7nao+ejehGxOq6
vRg+TDVMFw1wOZQQwOvntGBeqtExPw+5pkoUYRPL9L9yu8A9GAMInHKqWQSb80qR
Gcnk7fvz20g8fcTDJNIsr1RIsuQo9HiSkb4M1UCsTsml9qMZ96j0WxDpK1jYKIGr
Oxe5RhqT27N5NNAU9/unL4bOfrCoKnFmHwu/Y/nEDjB2wVpWNCWueeL5eo4TiqAB
YmNPhP4AbD5nYYw8zv/8Ic8mMlT3wmD2LeqnzPeVNWbZb8/OhQ==
=126k
-----END PGP SIGNATURE-----
-->
