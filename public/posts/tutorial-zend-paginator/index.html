<!--
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- -->
<!--
- -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- - -->
<!--
- - -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- - - -->
<!--
- - - -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

- - - - -->
<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,user-scalable=1"><meta name=description content="My corner of the web"><title>Adler Medrado's little piece of turf</title>
<link rel=author href=/humans.txt><link rel=canonical href=https://adlermedrado.com.br><link href=/css/styles.css rel=stylesheet></head><body><header><nav class=navbar role=navigation><div class=navbar_left><a href=/><strong>Adler Medrado</strong></a></div><div class=navbar_right><a href=/posts>Posts</a>
<a href=/tags>Posts by Tags</a></div></nav></header><main><section class=section><article><div><h1>Tutorial Zend Paginator</h1><div><div><p><small><time>March 28, 2009</time>
|
5 minutes read</small></p></div><span class=line_break></span></div><div class=content><p>O Zend Framework é muito interessante mesmo nos componentes mais simples, desta vez eu irei falar sobre o componente
Zend_Paginator, que é um componente que se propõe a fazer a paginação de qualquer coleção de dados de uma maneira bem
simples e mostrar os dados paginados para o usuário.</p><p><strong>ADAPTERS</strong></p><p>Este componente não exige que os dados a serem paginados sejam especificamente dados provenientes de bancos de dados,
ele faz a paginação de arrays, de dados relacionados a objetos Zend_Db_Select e Zend_Db_Table_Select e Iterators. Hoje
iremos nos ater ao uso dos Adapters Array e DbTableSelect.</p><p><strong>Os Adapters disponíveis são:</strong></p><p><code>Array</code> - Manipula qualquer Array criado em PHP
<code>DbSelect</code> - Utiliza um objeto Zend_Db_Select que retornará um Array
<code>DbTableSelect</code> - Utiliza um objeto Zend_Db_Table_Select, que retornará uma instância de Zend_Db_Rowset_Abstract.
<code>Iterator</code> - Utiliza uma instância de Iterator
<code>Null</code> - Não utiliza o mecanismo de paginação do componente permitindo que o programador possa implementar seu próprio
mecanismo.</p><p><strong>ME MOSTRE O CÓDIGO</strong></p><p>Quem está acostumado a ler meus artigos e tutoriais sabem que gosto de ir direto ao assunto e evito colocar textos
enfadonhos, então eu irei mostrar logo algum código aqui pra acordar quem já estiver babando em cima do teclado.</p><p>O primeiro exemplo será de uma paginação com um simples array.</p><p><code>ExemploController.php</code></p><pre><code>$tabela = new Tabela();
$res = $tabela-&gt;fetchAll();

$paginator = Zend_Paginator::factory($res);
$paginator-&gt;setItemCountPerPage(10);
$paginator-&gt;setCurrentPageNumber($this-&gt;_request-&gt;getParam('page'));

$this-&gt;view-&gt;paginator = $paginator;
?&gt;
</code></pre><p>O código acima representa as definições de um paginator em uma action do seu controller. Primeiro é criada a instância
do objeto <code>Zend_Db_Table</code> que será usado para buscar um array com os dados a serem paginados, depois criamos o objeto do
Zend_Paginator passando este array como parâmetro, informamos qual a quantidade de ítens por página e qual a página
atual que é informada por meio de parâmetro via method GET.</p><p>O array poderia ser um simples array ‘criado na mão’ que funcionaria direitinho também.</p><p>Agora vamos dar uma olhada no template da view.</p><p><code>arquivo.phtml</code></p><pre><code>&lt;?php if (count($this-&gt;paginator)): ?&gt;
&lt;?php foreach ($this-&gt;paginator as $exemplo): ?&gt;
&lt;h5&gt;&lt;?php echo $exemplo['titulo']?&gt;&lt;/h5&gt;
&lt;br /&gt;
&lt;p&gt;&lt;?php echo $exemplo['info']?&gt;&lt;/p&gt;
&lt;?php endforeach; ?&gt;
&lt;?echo $this-&gt;paginationControl($this-&gt;paginator,
'All',
'paginator_item.phtml'); ?&gt;
&lt;?php endif; ?&gt;
</code></pre><p>Muito simples. Nós iteramos o objeto paginator que passamos para a view e então manipulamos os ítens do array que passamos como parâmetro no controller.</p><p>O bloco de paginação com First, Last, Next, Last nós colocamos em um arquivo de template (phtml) separado e o passamos
como parâmetro no <code>Zend_View_Helper</code> <code>paginationControl</code> que é quem lida com o controle de paginação.</p><p>Na documentação do <code>Zend_Paginator</code> pode-se encontrar alguns exemplos de template de controle que podemos pegar e usar.</p><p>Vamos ver como isso funciona utilizando-se um objeto <code>Zend_Db_Table_Select</code>:</p><pre><code>$tabela = new Tabela();
$tabelaSelect = $tabela-&gt;select();

$paginator = Zend_Paginator::factory($tabelaSelect);
$paginator-&gt;setItemCountPerPage(10);
$paginator-&gt;setCurrentPageNumber($this-&gt;_request-&gt;getParam('page'));
$this-&gt;view-&gt;paginator = $paginator;
</code></pre><p>A diferença foi apenas o parâmetro que passamos, ao invés de um array, um objeto.</p><p>Vejamos como ficou o template com a iteração do resultado disso:</p><pre><code>&lt;?php if (count($this-&gt;paginator)): ?&gt;
&lt;?php foreach ($this-&gt;paginator as $exemplo): ?&gt;
&lt;h5&gt;&lt;?php echo $exemplo-&gt;titulo?&gt;&lt;/h5&gt;
&lt;br /&gt;
&lt;p&gt;&lt;?php echo $exemplo-&gt;info?&gt;&lt;/p&gt;
&lt;?php endforeach; ?&gt;
&lt;?echo $this-&gt;paginationControl($this-&gt;paginator,
'All',
'paginator_item.phtml'); ?&gt;
&lt;?php endif; ?&gt;
</code></pre><p>A única diferença em relação ao exemplo com array, é que pelo fato de o retorno ser um objeto <code>Zend_Db_Table_Rowset</code>, nós podemos acessar cada coluna do retorno do banco de dados como uma propriedade de um objeto, dessa forma nós tratamos tudo como um objeto.</p><p>Uma outra diferença que também é importante, é que o <code>Zend_Paginator</code> ao ver que a coleção de dados a ser paginada será o
resultado gerado por um objeto <code>Zend_Db_Table_Select</code> ele vai saber como realizar aquela query de paginação com limit e
etc, evitando que todo o conjunto de dados seja retornado de uma única vez. Quando passamos um array por exemplo, nós
enviamos ao <code>Zend_Paginator</code> uma coleção completa e a paginação é feita nele, já com o objeto não, pois ele saberá fazer o
limit implicitamente.</p><p>Bacana não é?</p><p>Vou colocar o código do template do controle de paginação que usei nesses exemplos, que é idêntico ao que está na
documentação do ZF:</p><pre><code>&lt;?php if ($this-&gt;pageCount): ?&gt;
&lt;div class=&quot;paginationControl&quot;&gt;
&lt;?= $this-&gt;firstItemNumber; ?&gt; - &lt;?= $this-&gt;lastItemNumber; ?&gt; of &lt;?= $this-&gt;totalItemCount; ?&gt;

&lt;?php if (isset($this-&gt;previous)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;first)); ?&gt;&quot;&gt;
First
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;First&lt;/span&gt; |
&lt;?php endif; ?&gt;

&lt;?php if (isset($this-&gt;previous)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;previous)); ?&gt;&quot;&gt;
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt; Previous
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt; Previous&lt;/span&gt; |
&lt;?php endif; ?&gt;

&lt;?php if (isset($this-&gt;next)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;next)); ?&gt;&quot;&gt;
Next &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
&lt;/a&gt; |
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;Next &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;&lt;/span&gt; |
&lt;?php endif; ?&gt;
&lt;?php if (isset($this-&gt;next)): ?&gt;
&lt;a href=&quot;&lt;?= $this-&gt;url(array('page' =&gt; $this-&gt;last)); ?&gt;&quot;&gt;
Last
&lt;/a&gt;
&lt;?php else: ?&gt;
&lt;span class=&quot;disabled&quot;&gt;Last&lt;/span&gt;
&lt;?php endif; ?&gt;

&lt;/div&gt;
&lt;?php endif; ?&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;
</code></pre><p><strong>CONSIDERAÇÕES FINAIS</strong></p><p>Este componente torna simples o trabalho chato de fazer um paginador na mão nos dando ainda a flexibilidade de não
precisar utilizar somente coleções de dados provenientes de um banco de dados.</p><p>Existem outros macetes que podem ser vistos na documentação do componente, eu coloquei aqui de maneira bem simples
apenas duas formas de se implementar paginação com o componente <code>Zend_Paginator</code> utilizando duas coleções de dados
diferentes.</p><p>Para quem já implementou isso antes sabe que não é um bicho de sete cabeças mas de vez em quando pode se tornar uma
coisa chata e se já temos um componente pronto nós podemos utilizar nossa criatividade e conhecimento diretamente no
negócio da aplicação e não em estrutura.</p><p>Deixe seu comentário sobre este artigo.</p><p>Até o próximo.</p></div></div></article><div><div><div><a href=https://adlermedrado.com.br/posts/enfim-zend-certified-engineer-2/>&#8592; Enfim Zend Certified Engineer #2</a>
|
<a href=https://adlermedrado.com.br/posts/chegou-meu-certificado-zce-zf/>Chegou meu certificado ZCE-ZF &#8594;</a></div></div></div></section></main><span class=line_break></span>
<span class=line_break></span><footer><div><p><small>&copy; 1996-2023 Adler Medrado</small></p></div><div class=gpg_signed_info><p>All pages on this website are PGP signed.
Import my <a href=/pub-key.asc>public key</a> and check with <em>curl https://adlermedrado.com.br/posts/tutorial-zend-paginator/ | gpg --verify</em></p></div></footer></body></html><!--
- - - -----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEOakOfYA7XALT7+un/2dtxSoBkcMFAmWRhTIACgkQ/2dtxSoB
kcNXYA/+LT35AOh6iBaNuk4yuKKdPmXzZn73P2J4aivEkFTKA//lXXsHQQ9w0lrb
IadQ/XVpfku5bTBi5zyerwBcKvbRiGg+UR2fCYOb2MllzLK8M3lTki+CAWCl5qCE
3iav4xTY8cvUkwiruckNWGeR9/n/PNZTCmyiIHy6I17SEV3D+XfE7z8/O5HzTtRa
q0h73AXgyGEx1mMO58Vje6Q0AUPQZXQU5X+Xi65ZbzH9AafRM22rCh7eX0ysKWwa
DypaZj0yWsHrjsrbVns2MTNczFvV1WQPGLBE0rQxdSLHhVszPrRGMg9FqJO4rIk3
N9s3vSdyeJUc/uV9AecI9M4S+z3eEGRd2Ag9dTbnegr8FQIKSATBOYdeqtixSz/N
IikeOpNR0j0IXZCSB8zqK93xbRJMXSdf+Lv4ONODFQ8mzuU9BL3E9+Tu/4HUp8+3
i7/oRH01yCiPE6G0+Fl2tg078t9AN1sPDJ1TAm/0RkOQ7VUyDbZGyjmi7KevoJfJ
iSEaY0qQetxFFIDb60OLYKgds9einJaZoj64ilWb0QB9ykMuwoUiPtuo3wA0EY0g
llpmk8TtEelaLUZgNW4qvGnzFA3txZX0ggqs5E1giVqr11ci1aWVxAmzrDE9I3sg
6uCrdC7nu4RynOlU/fKA6FDRAKD5DRFJK9JBo8pBWnEATmXGBy8=
=zTLP
- - - -----END PGP SIGNATURE-----
- - - -->
<!--
- - -----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEOakOfYA7XALT7+un/2dtxSoBkcMFAmWRjxoACgkQ/2dtxSoB
kcPevA/9FrmsGgf6D9Ceg+rpKitYG4F7jPeUqplxRyNlIXds+7kCFjIkXN1+yUfx
HxD6i9A/2lpljLhK90uL4YUjFsL2zBN9CLLheoBl/c0ZHhnvZzyHPElVWHlsOst8
ExQmptQWhjWlgeoztAaTC1fb4XyglqSCZna2GlqOcrCTUq/fqWJEQc9+A74p9p4j
2HT86WYwcN03v+//wmjQ121sMFkrHIxg0fbvcVWjgXrKjeL7m+rhVc6aILSe4tGw
3Cj17keVThlD7BnVXwKC8jPenYbjsIPDlHp3IF36N/TCOnTcwaxnVNGIH1BZq8w0
ZE4ID5ugxqINIet0AUwm012tLfYqP2RdYzxOWWaKPrYlUce53VYOO/SxaHJn+asz
Wpqf8kSYun82eKkB7E0Yqdr5I/IoIFRU/N8McNM6efwsHAaKtBXHGbnQ1WtQ05BH
IHY5s/RmxnKT9t/fz9PfP3C3YB9gnI1fbyM/8DKWd2p8zlJMSz4LNz/hlCNyra1g
lgU/Kq1Q4VG+h1XUwUmfCFw41OWaIFTwaniNIPyhCWZW5QI4neOM/Y1wrfAznbFP
f6WzP1vue35VlZs/2MHDJaUOp8seu+dupXN1kvP7tP6ZxpveLkopScMXHGObhZYH
ROVoqeK9Qz3EF/AxRsJlMm3j56CvJmdQxjsSGarKnoZ7R0oLH+g=
=ZrWG
- - -----END PGP SIGNATURE-----
- - -->
<!--
- -----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEOakOfYA7XALT7+un/2dtxSoBkcMFAmWRj+4ACgkQ/2dtxSoB
kcP+3Q//Wpuci1aBiXyxqg1Dmb9Mam0QRqXj0FWnwsYikZ28LvwhSC191SRtypC4
mjg5TkQl8jBSR+z/tlyaZOliv60iuTxsedu9Ypt6PZjXhW+8KOBVrlyo0lZ0i9oT
lKfdLPNILN004tRXdFTvHqkiv0kyzl60YcZ27MYGBn4ouRYXO2P6g7eMwb64QrH5
6PtNJxJ+0YggF0s2gF8bXbQPMBhjBuhMEoMOxNAEwZlLvHPY5oTRo7xILybt5XAL
eu2Y4Yp9+DhcJJdpcu5o+J/XDh41zlwTjjamba0hlm8Ezf27gK+IgxfKfL2u4V6Y
dL91FD/LHOHe71weQpZMWzsdMA3RSOk4JvufaKP2SweRAPXIe2v5bayN6VeC4dSP
sTy6TWLp0yzqb9Xx3AgG2OqfVDYEaw4dJAymh0uWQgcm6D9jY6Q33yxBUnaGfGYD
7Vjp5ryxkN75GhbrFVuwvFEmLndStbDapTyFwkzolGZpq0XCdcB/8lsGLZcHKeaS
GyZVlgS7PXi4YGG8p3ao4R0uVUQAzBadvopm5gIOwOtROrFxnH0uRmfc4gBfiKrl
XJv50sVhHJcO1C2BPTv8qlV8WME1ThyGwaOeGsul6g/n1+CbruIjDeXMzA34ijlS
77j3z5E/IdswFuJfFxMQiunU1ag4cYdty9LwNVcxUQBPlOZgpOc=
=sjgP
- -----END PGP SIGNATURE-----
- -->
<!--
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEOakOfYA7XALT7+un/2dtxSoBkcMFAmWRlIUACgkQ/2dtxSoB
kcO/Tg/5AarsYyL01jo3bXPWbt9cEH/tHCvzKYD9QX+cp/dSCG9B2p7fJJFvtmmo
421bWK+YIqx9HT4u3e7vTa4CpqkvdQ6X+NQkE5oUhu66r1Ti4idKvC65379/44QZ
xdeQJ6Zz+LXp0nJ7izlaxsKW0PEw5T6j69yrvF/YmJQ0snzthh1uPPOGsDgZC8Uc
u3vSNzFPn9t5goY+oigb2b1r3HpeGhuv6b0M7Ec8Vo7i3+ZGkDAtTL6g1Q5JneI3
oSzP2+UuIZTjpYwqfGqWF0Kw81ZPpr2JqCX3wovLL0c4U3aWIFn+i73f4iAuUu1w
9IyMzaOVkowSU2VHAhtpnfA0uKwvse8J+LnGS2tm+qLr1/sOn1mAHTJ2pViiJUJG
W/5QK3WIAcUPhENKGCMLULnKQ/fQfhTJlsUGD2KzAAthyLn0u3DKa4DmG6tIWhgT
ulmKNS8IsZBmTxC6bpAFq5Fn1a8uL12eAeBzNQkH/tf67/XMBSreSP2OJ2AEEQ16
419+pFD4tttwcypfKWlQNDMvRDtonKZ5ZY9xmj4Fjfds83DvcGTP1KbsLpF8snBx
7DgRM8Wu3vjEy/UNYpPAflTyIu132Rny8Oz+5iHIC0kR3KqZAXZsYIJ3uoBXHhmf
2WOBt5qwu1Z4xa+gauCtx+al0eBwtMUtXIiOIgp9/f6C2IbavFY=
=1tZA
-----END PGP SIGNATURE-----
-->
